<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>RSS阅读器</title>
<style type="text/css">
/* 页面字体样式 */
body, td, input, textarea {
    font-family:Arial;
    font-size:12px;
}

/* RSS总标题样式 */
#rssTitle {
    font-size:14px;
    width:500px;
    font-weight:bold;
    margin:10px;
}

/* 条目标题样式 */
div.title {
    padding:5px;
    background:#006699;
    color:#FFF;
    width:500px;
}

/* 条目内容样式 */
div.desc {
    padding:5px;
    background:#FFFFCC;
    width:500px;
    border:1px solid #006699;
}

/* 超链接样式 */
a {
    color:#FFF;
}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
//用于创建XMLHttpRequest对象
function createXmlHttp() {
    //根据window.XMLHttpRequest对象是否存在使用不同的创建方式
    if (window.XMLHttpRequest) {
       xmlHttp = new XMLHttpRequest();                  //FireFox、Opera等浏览器支持的创建方式
    } else {
       xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");//IE浏览器支持的创建方式
    }
}

//通过服务器读取RSS信息
function getRSS() {
    var url = document.getElementById("url").value;             //获取RSS目标地址

    //地址为空时提示用户输入
    if (url == "") {
        alert("请输入RSS地址。");
        return;
    }
    createXmlHttp();                                            //创建XMLHttpRequest对象
    xmlHttp.onreadystatechange = writeRSS;                      //设置回调函数
    xmlHttp.open("POST", "read_rss.jsp", true);                 //访问服务器获取RSS信息
    xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlHttp.send("url=" + encodeURIComponent(url));             //发送包含地址信息的请求体
}


//解析RSS信息并写入页面
function writeRSS() {
    if (xmlHttp.readyState == 4) {
        var rssXML = xmlHttp.responseXML;                           //获取服务器响应XML
        $("#rssTitle").html($("//channel/title", rssXML).text());   //将RSS总标题写入页面
        $("#rssInfo").empty();                                      //清空现有的RSS信息
        //遍历响应体中的每隔item元素
        $("item", rssXML).each(function(){
            var title = $("title", this).text();                    //获取标题
            var desc = $("description", this).text();               //获取描述
            var link = $("link", this).text();                      //获取链接地址
            //将标题、描述、链接地址三部分信息追加到页面
            $("#rssInfo").append("<div class='title'><a href='" + link + "'>" + title + "</a></div>").append("<div class='desc'>" + desc + "</div>");
        });
    }
}
</script>
</head>

<body>
<h1>RSS阅读器</h1>

<div>
    地址：<input type="text" id="url" size="50" value="http://localhost:8080/ajax/8.1/rss.xml">
    <input type="button" onclick="getRSS()" value="读取RSS">
</div>

<!-- RSS总标题 -->
<div id="rssTitle"></div>

<!-- RSS条目信息 -->
<div id="rssInfo"></div>

</body>
</html>