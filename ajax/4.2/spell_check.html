<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>文章拼写检查</title>

<style type="text/css">
/* 有问题单词的样式 */
span.warn {
    color:#F00;
}
</style>

<script type="text/javascript">
var xmlHttp;                        //用于保存XMLHttpRequest对象的全局变量

//用于创建XMLHttpRequest对象
function createXmlHttp() {
    //根据window.XMLHttpRequest对象是否存在使用不同的创建方式
    if (window.XMLHttpRequest) {
       xmlHttp = new XMLHttpRequest();                  //FireFox、Opera等浏览器支持的创建方式
    } else {
       xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");//IE浏览器支持的创建方式
    }
}

//将文本发给服务器做检查
function spellCheck() {
    var text = document.getElementById("text").value;

    createXmlHttp();                                //创建XMLHttpRequest对象
    xmlHttp.onreadystatechange = writeCheckResult;  //设置回调函数
    xmlHttp.open("POST", "spell_check.jsp", true);  //发送POST请求
    xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlHttp.send("text=" + encodeURIComponent(text));
}

//获取检查结果
function writeCheckResult() {
    if (xmlHttp.readyState == 4) {
        document.getElementById("checkDiv").innerHTML = xmlHttp.responseText;//将检查结果写入页面
    }
}
</script>
</head>

<body>
<h1>文章拼写检查</h1>

<textarea rows="5" cols="60" id="text"></textarea> <br />
<input type="button" onclick="spellCheck()" value="检查拼写">

<p>检查结果</p>
<div id="checkDiv">
</div>
</body>
</html>
