<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<script src="jQuery/jquery-1.6.4.js" type="text/javascript"></script>
<script type="text/javascript" >
jQuery.extend(jQuery.expr[":"],{
    "nth-child" : function(elem, match){    //按an+b公式匹配元素，参数elem表示遍历元素，match表示匹配返回的数组
        var index = $(elem).parent().children().index(elem) + 1;    //重新计算序号，起始位置为1，而不是0
        var num = match[3].match(/((\d+)n)?\+(\d+)?/);    //使用match()方法匹配a(b(c))格式中的"b(c)"字符串
        if(num[2] == undefined){    //如果an+b公式中，a未知，则直接返回b作为序号
            return index == num[3];
        }
        else if(num[3] == undefined){     //如果an+b公式中，b未知，则直接返回0作为序号
            num[3] = 0;    
        }
        return (index-num[3]) % num[2] == 0;    //最后根据公式测试当前元素是否匹配
    }
})

$(function(){
    $("p:nth-child(3n+2)").css("color","red");    //匹配3n+2位置上的元素
})


</script>
<style type="text/css">
</style>
<title>上机练习</title>
</head>
<body>
<p>段落文本1</p>
<p>段落文本2</p>
<p>段落文本3</p>
<p>段落文本4</p>
<p>段落文本5</p>
<p>段落文本6</p>
</body>
</html>
